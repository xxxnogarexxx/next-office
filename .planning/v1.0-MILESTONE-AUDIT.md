---
milestone: v1.0
audited: 2026-02-26
status: gaps_found
scores:
  requirements: 22/60
  phases: 3/6
  integration: 19/22
  flows: 4/4
gaps:
  requirements:
    - id: "SEC-01"
      status: "partial"
      phase: "Phase 1"
      claimed_by_plans: ["01-PLAN.md"]
      completed_by_plans: []
      verification_status: "passed"
      evidence: "VERIFICATION says SATISFIED with code evidence. SUMMARY frontmatter for 01-01 does not list SEC-01 in requirements-completed. Likely a frontmatter omission — the implementation is confirmed present."
    - id: "SEC-02"
      status: "partial"
      phase: "Phase 1"
      claimed_by_plans: ["01-PLAN.md"]
      completed_by_plans: []
      verification_status: "passed"
      evidence: "Same as SEC-01 — VERIFICATION SATISFIED, SUMMARY frontmatter missing. Implementation confirmed."
    - id: "SEC-03"
      status: "partial"
      phase: "Phase 1"
      claimed_by_plans: ["01-PLAN.md"]
      completed_by_plans: []
      verification_status: "passed"
      evidence: "Same as SEC-01 — VERIFICATION SATISFIED, SUMMARY frontmatter missing. Implementation confirmed."
    - id: "DEV-03"
      status: "partial"
      phase: "Phase 2"
      claimed_by_plans: ["02-03-PLAN.md"]
      completed_by_plans: ["02-03-SUMMARY.md"]
      verification_status: "needs_human"
      evidence: "All Sentry SDK files wired (client, server, edge configs + global-error.tsx + withSentryConfig). Code is correct but enabled: production only — requires SENTRY_DSN credentials and production deploy to confirm end-to-end."
    - id: "SEC-12"
      status: "unsatisfied"
      phase: "Phase 5"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 5 which has not been executed. No phase directory, no VERIFICATION, no SUMMARY."
    - id: "PERF-01"
      status: "unsatisfied"
      phase: "Phase 4"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 4 which has not been executed."
    - id: "PERF-02"
      status: "unsatisfied"
      phase: "Phase 4"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 4 which has not been executed."
    - id: "PERF-03"
      status: "unsatisfied"
      phase: "Phase 4"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 4 which has not been executed."
    - id: "PERF-04"
      status: "unsatisfied"
      phase: "Phase 4"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 4 which has not been executed."
    - id: "PERF-05"
      status: "unsatisfied"
      phase: "Phase 4"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 4 which has not been executed."
    - id: "PERF-06"
      status: "unsatisfied"
      phase: "Phase 4"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 4 which has not been executed."
    - id: "PERF-07"
      status: "unsatisfied"
      phase: "Phase 4"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 4 which has not been executed."
    - id: "PERF-08"
      status: "unsatisfied"
      phase: "Phase 4"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 4 which has not been executed."
    - id: "UX-01"
      status: "unsatisfied"
      phase: "Phase 5"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 5 which has not been executed."
    - id: "UX-02"
      status: "unsatisfied"
      phase: "Phase 5"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 5 which has not been executed."
    - id: "UX-03"
      status: "unsatisfied"
      phase: "Phase 5"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 5 which has not been executed."
    - id: "UX-04"
      status: "unsatisfied"
      phase: "Phase 5"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 5 which has not been executed."
    - id: "UX-05"
      status: "unsatisfied"
      phase: "Phase 5"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 5 which has not been executed."
    - id: "UX-06"
      status: "unsatisfied"
      phase: "Phase 5"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 5 which has not been executed."
    - id: "UX-07"
      status: "unsatisfied"
      phase: "Phase 5"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 5 which has not been executed."
    - id: "UX-08"
      status: "unsatisfied"
      phase: "Phase 5"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 5 which has not been executed."
    - id: "UX-09"
      status: "unsatisfied"
      phase: "Phase 5"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 5 which has not been executed."
    - id: "UX-10"
      status: "unsatisfied"
      phase: "Phase 5"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 5 which has not been executed."
    - id: "UX-11"
      status: "unsatisfied"
      phase: "Phase 5"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 5 which has not been executed."
    - id: "UX-12"
      status: "unsatisfied"
      phase: "Phase 5"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 5 which has not been executed."
    - id: "REL-01"
      status: "unsatisfied"
      phase: "Phase 5"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 5 which has not been executed."
    - id: "REL-02"
      status: "unsatisfied"
      phase: "Phase 5"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 5 which has not been executed."
    - id: "REL-03"
      status: "unsatisfied"
      phase: "Phase 5"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 5 which has not been executed."
    - id: "SEO-01"
      status: "unsatisfied"
      phase: "Phase 6"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 6 which has not been executed."
    - id: "SEO-02"
      status: "unsatisfied"
      phase: "Phase 6"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 6 which has not been executed."
    - id: "SEO-03"
      status: "unsatisfied"
      phase: "Phase 6"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 6 which has not been executed."
    - id: "SEO-04"
      status: "unsatisfied"
      phase: "Phase 6"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 6 which has not been executed."
    - id: "SEO-05"
      status: "unsatisfied"
      phase: "Phase 6"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 6 which has not been executed."
    - id: "SEO-06"
      status: "unsatisfied"
      phase: "Phase 6"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 6 which has not been executed."
    - id: "SEO-07"
      status: "unsatisfied"
      phase: "Phase 6"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 6 which has not been executed."
    - id: "SEO-08"
      status: "unsatisfied"
      phase: "Phase 6"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 6 which has not been executed."
    - id: "SEO-09"
      status: "unsatisfied"
      phase: "Phase 6"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 6 which has not been executed."
    - id: "SEO-10"
      status: "unsatisfied"
      phase: "Phase 6"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 6 which has not been executed."
    - id: "SEO-11"
      status: "unsatisfied"
      phase: "Phase 6"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 6 which has not been executed."
    - id: "QW-02"
      status: "unsatisfied"
      phase: "Phase 6"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 6 which has not been executed."
    - id: "QW-03"
      status: "unsatisfied"
      phase: "Phase 6"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 6 which has not been executed."
    - id: "QW-04"
      status: "unsatisfied"
      phase: "Phase 6"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "orphaned"
      evidence: "Assigned to Phase 6 which has not been executed."
  integration:
    - from: "Phase 3 (lead-form-section.tsx)"
      to: "Phase 2 (DEV-07 conversion guard)"
      issue: "LP form fires hardcoded AW-XXXXXXXXXX Google Ads conversion event on every submission. The isPlaceholder() guard in conversion-tracker.tsx does NOT protect this code path. Junk conversion events sent if gtag loads in production."
      affected_requirements: ["DEV-07"]
    - from: "Phase 3 (service.ts dedup)"
      to: "Phase 3 (REL-06 guarantee)"
      issue: "Dedup only runs when both phone AND city are present. API submissions without phone bypass dedup entirely — leads without phone are never deduplicated."
      affected_requirements: ["REL-06"]
    - from: "Phase 3 (escapeHtml consolidation)"
      to: "Phase 1 (search-map-inner.tsx)"
      issue: "search-map-inner.tsx retains local escapeHtml copy. Phase 3 SUMMARY claims 'no duplication' but map component was not migrated. SEC-03 still satisfied (local copy works), but consolidation claim (REL-04) is overstated."
      affected_requirements: ["REL-04"]
  flows: []
tech_debt:
  - phase: 02-infrastructure-foundations
    items:
      - "DEV-03: Sentry SDK wired but credentials not configured — needs SENTRY_DSN, SENTRY_AUTH_TOKEN, SENTRY_ORG, SENTRY_PROJECT"
      - "CI workflow uses placeholder env vars (AW-PLACEHOLDER) — intentional for build, no production impact"
  - phase: 03-lead-pipeline-hardening
    items:
      - "env.ts typed object not imported by Phase 3 modules — all use process.env.* directly with own null-guards (pattern inconsistency, not a runtime bug)"
      - "/api/districts route has no consumer in source — route exists but nothing fetches it"
      - "lead-form-section.tsx line 35: hardcoded AW-XXXXXXXXXX Google Ads placeholder fires on submission (pre-existing from Phase 2)"
  - phase: 01-security-hardening
    items:
      - "SUMMARY frontmatter for 01-01-SUMMARY.md has empty requirements-completed — SEC-01, SEC-02, SEC-03 not listed despite being implemented"
---

# v1.0 Milestone Audit: next-office.io Launch Readiness

**Audited:** 2026-02-26
**Status:** GAPS FOUND
**Milestone Goal:** Fix all P0s, all P1s, selected reliability issues, and quick P2 wins — making the platform safe to launch.

---

## Milestone Progress

| Phase | Name | Status | Requirements |
|-------|------|--------|-------------|
| 1 | Security Hardening | Complete | SEC-01 through SEC-05 |
| 2 | Infrastructure Foundations | Complete | DEV-01 through DEV-07, SEC-06, QW-01 |
| 3 | Lead Pipeline Hardening | Complete | SEC-07 through SEC-11, REL-04 through REL-06 |
| 4 | Performance Architecture | **Not started** | PERF-01 through PERF-08 |
| 5 | UX and Reliability | **Not started** | UX-01 through UX-12, REL-01 through REL-03, SEC-12 |
| 6 | SEO and Analytics | **Not started** | SEO-01 through SEO-11, QW-02 through QW-04 |

**Completed:** 3/6 phases | **Requirements addressed:** 22/60

---

## Requirements Coverage (3-Source Cross-Reference)

### Satisfied (18 requirements)

All three sources agree — VERIFICATION passed, SUMMARY lists requirement, REQUIREMENTS.md checked.

| Requirement | Phase | VERIFICATION | SUMMARY | REQUIREMENTS.md |
|-------------|-------|-------------|---------|-----------------|
| SEC-04 | 1 | SATISFIED | 01-02 | [x] |
| SEC-05 | 1 | SATISFIED | 01-02 | [x] |
| SEC-06 | 2 | SATISFIED | 02-02 | [x] |
| SEC-07 | 3 | SATISFIED | 03-01, 03-02 | [x] |
| SEC-08 | 3 | SATISFIED | 03-01, 03-02 | [x] |
| SEC-09 | 3 | SATISFIED | 03-01 | [x] |
| SEC-10 | 3 | SATISFIED | 03-01, 03-02 | [x] |
| SEC-11 | 3 | SATISFIED | 03-01 | [x] |
| DEV-01 | 2 | SATISFIED | 02-01 | [x] |
| DEV-02 | 2 | SATISFIED | 02-01 | [x] |
| DEV-04 | 2 | SATISFIED | 02-04 | [x] |
| DEV-05 | 2 | SATISFIED | 02-01 | [x] |
| DEV-06 | 2 | SATISFIED | 02-02 | [x] |
| DEV-07 | 2 | SATISFIED | 02-01 | [x] |
| QW-01 | 2 | SATISFIED | 02-02 | [x] |
| REL-04 | 3 | SATISFIED | 03-01, 03-02 | [x] |
| REL-05 | 3 | SATISFIED | 03-01, 03-02 | [x] |
| REL-06 | 3 | SATISFIED | 03-01, 03-02 | [x] |

### Partial (4 requirements)

Implementation confirmed by VERIFICATION but missing from at least one other source.

| Requirement | Phase | Issue | Risk |
|-------------|-------|-------|------|
| SEC-01 | 1 | VERIFICATION: SATISFIED. SUMMARY 01-01 frontmatter: empty (not listed). REQUIREMENTS.md: [x]. Implementation is confirmed present — this is a SUMMARY frontmatter omission. | None — code is correct |
| SEC-02 | 1 | Same as SEC-01. SUMMARY frontmatter gap. | None — code is correct |
| SEC-03 | 1 | Same as SEC-01. SUMMARY frontmatter gap. | None — code is correct |
| DEV-03 | 2 | VERIFICATION: NEEDS HUMAN. SUMMARY 02-03: listed. REQUIREMENTS.md: [ ]. Code fully wired but Sentry DSN credentials not configured — cannot confirm end-to-end without production deploy. | Low — needs human setup of SENTRY_DSN |

### Unsatisfied — Unstarted Phases (38 requirements)

These requirements are assigned to Phases 4-6 in the REQUIREMENTS.md traceability table. No phase directories, VERIFICATION files, or SUMMARY files exist for these phases. All are orphaned.

| Phase | Requirements | Count |
|-------|-------------|-------|
| Phase 4: Performance | PERF-01, PERF-02, PERF-03, PERF-04, PERF-05, PERF-06, PERF-07, PERF-08 | 8 |
| Phase 5: UX/Reliability | UX-01 through UX-12, REL-01, REL-02, REL-03, SEC-12 | 16 |
| Phase 6: SEO/Analytics | SEO-01 through SEO-11, QW-02, QW-03, QW-04 | 14 |

---

## Cross-Phase Integration

### Integration Findings

**1. DEV-07 Partial Gap — LP Form Google Ads Placeholder**
- `lead-form-section.tsx` line 35 fires a hardcoded `AW-XXXXXXXXXX/XXXXXXXXXX` Google Ads conversion event on every LP form submission
- The `isPlaceholder()` guard in `conversion-tracker.tsx` (Phase 2) does NOT protect this code path
- If gtag loads in production before the real conversion ID is configured, junk events are sent
- Affected: DEV-07

**2. REL-06 Dedup Bypass — Phone-less Leads**
- `service.ts` line 152: dedup gate requires both `phone` AND `city` to be truthy
- Direct API submissions without a phone field bypass dedup entirely
- The HTML form marks phone as `required`, so browser submissions are protected — but API-direct submissions are not
- Affected: REL-06

**3. REL-04 Consolidation Overstatement — escapeHtml Duplication**
- `search-map-inner.tsx` lines 98-105 retains a local `escapeHtml` copy (identical implementation)
- Phase 3 SUMMARY claims "no duplication" but the map component was not migrated to import from `email.ts`
- SEC-03 still satisfied (local copy works), but consolidation is incomplete
- Affected: REL-04

### E2E Flow Verification

| Flow | Path | Status |
|------|------|--------|
| Lead submission (main) | lead-form.tsx → /api/csrf → /api/leads → 9-step pipeline | **Complete** |
| Lead submission (LP) | lead-form-section.tsx → /api/csrf → /api/lp-leads → 9-step pipeline | **Complete** |
| Transit map (listing) | listing-map-inner.tsx → /api/transit → parameterized proxy → popup | **Complete** |
| Transit lines (search) | search-map-inner.tsx → /api/transit-lines → escaped popup | **Complete** |

All 4 E2E flows are wired end-to-end. No broken flows.

### Orphaned Routes

| Route | Status | Notes |
|-------|--------|-------|
| `/api/districts` | No consumer in source | Route exists with correct validation but nothing fetches it |
| `/api/health` | No app consumer | Expected — consumed by external monitoring tools |

---

## Tech Debt

### Phase 1: Security Hardening
- 01-01-SUMMARY.md frontmatter has empty `requirements-completed` — SEC-01, SEC-02, SEC-03 not listed despite being implemented

### Phase 2: Infrastructure Foundations
- DEV-03: Sentry SDK wired but credentials not configured — needs `SENTRY_DSN`, `SENTRY_AUTH_TOKEN`, `SENTRY_ORG`, `SENTRY_PROJECT` as GitHub secrets
- CI workflow uses placeholder env vars (`AW-PLACEHOLDER`) — intentional for build, no production impact

### Phase 3: Lead Pipeline Hardening
- `env.ts` typed object not imported by Phase 3 modules — all use `process.env.*` directly with own null-guards (pattern inconsistency, not a runtime bug)
- `/api/districts` route has no consumer in source — route exists but nothing fetches it
- `lead-form-section.tsx` line 35: hardcoded `AW-XXXXXXXXXX` Google Ads placeholder fires on submission (pre-existing)

**Total: 6 tech debt items across 3 phases**

---

## Phase Verification Summary

| Phase | VERIFICATION Status | Score | Gaps | Human Verification Items |
|-------|-------------------|-------|------|-------------------------|
| 01: Security Hardening | PASSED | 6/6 | None | 2 (rate limit in prod, XSS in browser) |
| 02: Infrastructure Foundations | PASSED | 9/10 | 1 fixed inline (env.ts import) | 2 (Sentry live capture, source map upload) |
| 03: Lead Pipeline Hardening | PASSED | 5/5 | None | 3 (CSRF rejection, dedup flow, email latency) |

All 3 completed phases passed verification. 7 items flagged for human verification (behavioral tests requiring live environment).

---

_Audited: 2026-02-26_
_Auditor: Claude (gsd-audit-milestone)_
