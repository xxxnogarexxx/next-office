---
phase: 11-server-side-event-proxy
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/09-enhanced-conversions/09-01-SUMMARY.md
  - .planning/phases/09-enhanced-conversions/09-02-SUMMARY.md
  - .planning/phases/10-offline-conversion-pipeline/10-01-SUMMARY.md
  - .planning/phases/12-monitoring-observability/12-02-SUMMARY.md
autonomous: true
requirements: [SSP-01, SSP-02, SSP-03]

must_haves:
  truths:
    - "09-01-SUMMARY.md has requirements-completed field in frontmatter"
    - "09-02-SUMMARY.md has requirements-completed field in frontmatter"
    - "10-01-SUMMARY.md has requirements-completed field in frontmatter"
    - "12-02-SUMMARY.md has valid YAML frontmatter (no markdown headings inside YAML)"
    - "12-02-SUMMARY.md correctly references Plan 01 as health endpoint (not Sentry)"
  artifacts:
    - path: ".planning/phases/09-enhanced-conversions/09-01-SUMMARY.md"
      provides: "Consistent frontmatter with requirements-completed"
      contains: "requirements-completed"
    - path: ".planning/phases/09-enhanced-conversions/09-02-SUMMARY.md"
      provides: "Consistent frontmatter with requirements-completed"
      contains: "requirements-completed"
    - path: ".planning/phases/10-offline-conversion-pipeline/10-01-SUMMARY.md"
      provides: "Consistent frontmatter with requirements-completed"
      contains: "requirements-completed"
    - path: ".planning/phases/12-monitoring-observability/12-02-SUMMARY.md"
      provides: "Fixed frontmatter and corrected attribution"
      contains: "dependency_graph"
  key_links: []
---

<objective>
Fix documentation gaps across four SUMMARY files: add missing `requirements-completed` frontmatter fields in 09-01, 09-02, and 10-01 SUMMARY files, and fix the broken frontmatter structure and incorrect attribution in 12-02-SUMMARY.md.

Purpose: Consistent SUMMARY frontmatter ensures the GSD history-digest tool can parse requirement completion data across all phases. The 12-02 attribution error incorrectly identifies Plan 01 as "Sentry" when it is actually the health tracking endpoint.

Output: Four SUMMARY files with consistent, valid frontmatter.
</objective>

<execution_context>
@/Users/szymonwilkosz/.claude/get-shit-done/workflows/execute-plan.md
@/Users/szymonwilkosz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-enhanced-conversions/09-01-SUMMARY.md
@.planning/phases/09-enhanced-conversions/09-02-SUMMARY.md
@.planning/phases/10-offline-conversion-pipeline/10-01-SUMMARY.md
@.planning/phases/12-monitoring-observability/12-02-SUMMARY.md
@.planning/phases/12-monitoring-observability/12-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add requirements-completed to 09-01, 09-02, and 10-01 SUMMARY frontmatter</name>
  <files>
    .planning/phases/09-enhanced-conversions/09-01-SUMMARY.md
    .planning/phases/09-enhanced-conversions/09-02-SUMMARY.md
    .planning/phases/10-offline-conversion-pipeline/10-01-SUMMARY.md
  </files>
  <action>
    Add the `requirements-completed` field to three SUMMARY files that are missing it. This field follows the pattern established in later summaries (12-01, 12-02) and is required for consistent history-digest parsing.

    **09-01-SUMMARY.md:**
    - Already has `requirements: [EC-01, EC-03]` in frontmatter (using underscore-separated YAML keys)
    - Add `requirements-completed: [EC-01, EC-03]` after the existing `requirements` field (before the closing `---`)
    - The `requirements` field lists what this plan addresses; `requirements-completed` confirms they were satisfied

    **09-02-SUMMARY.md:**
    - Currently has NO requirements tracking in frontmatter
    - Add `requirements-completed: [EC-04]` before the closing `---`
    - EC-04 is the transaction_id requirement — this plan added the column, validation, and Supabase write for it (server-side half)

    **10-01-SUMMARY.md:**
    - Currently has NO requirements tracking in frontmatter
    - Add `requirements-completed: [OFL-01, OFL-02, OFL-03, OFL-04]` before the closing `---`
    - These four OFL requirements are satisfied by this plan (HMAC auth, lead matching, idempotent conversion, queue entry)

    Do NOT change any other frontmatter fields or body content in these files. Minimal, targeted edits only.
  </action>
  <verify>
    <automated>grep -l "requirements-completed" .planning/phases/09-enhanced-conversions/09-01-SUMMARY.md .planning/phases/09-enhanced-conversions/09-02-SUMMARY.md .planning/phases/10-offline-conversion-pipeline/10-01-SUMMARY.md | wc -l | grep -q "3" && echo "PASS: All 3 files have requirements-completed" || echo "FAIL"</automated>
  </verify>
  <done>09-01-SUMMARY.md has `requirements-completed: [EC-01, EC-03]`, 09-02-SUMMARY.md has `requirements-completed: [EC-04]`, 10-01-SUMMARY.md has `requirements-completed: [OFL-01, OFL-02, OFL-03, OFL-04]`.</done>
</task>

<task type="auto">
  <name>Task 2: Fix 12-02-SUMMARY.md frontmatter structure and attribution error</name>
  <files>.planning/phases/12-monitoring-observability/12-02-SUMMARY.md</files>
  <action>
    Fix two issues in 12-02-SUMMARY.md:

    **Issue 1: Broken YAML frontmatter structure**
    The current frontmatter uses markdown headings (`# Dependency graph`, `# Tech tracking`, `# Metrics`) inside the YAML block. YAML treats `#` as comments, so all content after these headings is silently ignored by parsers.

    Convert the frontmatter to use proper YAML keys matching the pattern in 09-01 and 09-02 (which use underscored/hyphenated YAML keys without `#` headings):

    Replace:
    ```
    # Dependency graph
    requires:
    ```
    With:
    ```
    dependency_graph:
      requires:
    ```

    Replace:
    ```
    # Tech tracking
    tech-stack:
    ```
    With:
    ```
    tech_stack:
    ```
    (nest the `added` and `patterns` under `tech_stack`)

    Replace:
    ```
    # Metrics
    duration: 1min
    completed: "2026-02-27"
    ```
    With:
    ```
    metrics:
      duration: "1 min"
      completed: "2026-02-27"
    ```

    Move `key-files`, `key-decisions`, `patterns-established`, and `requirements-completed` to be top-level YAML keys (not under a `#` heading comment).

    The final frontmatter should have these top-level keys:
    - `phase`, `plan`, `subsystem`, `tags`
    - `dependency_graph` (with `requires`, `provides`, `affects` nested)
    - `tech_stack` (with `added`, `patterns` nested)
    - `key_files` (with `created`, `modified` nested)
    - `decisions` (list)
    - `patterns_established` (list)
    - `requirements-completed` (list)
    - `metrics` (with `duration`, `completed` nested)

    **Issue 2: Incorrect Plan 01 attribution in body**
    In the "Next Phase Readiness" section (line 107), the text says:
    `"Phase 12 Plan 01 (Sentry) and Plan 02 (this view) can be applied independently"`

    This is incorrect. Phase 12 Plan 01 is the conversion pipeline health endpoint (`/api/health/tracking`), NOT Sentry. Replace:
    `"Phase 12 Plan 01 (Sentry)"`
    with:
    `"Phase 12 Plan 01 (health endpoint)"`
  </action>
  <verify>
    <automated>grep -c "^# " .planning/phases/12-monitoring-observability/12-02-SUMMARY.md | head -1 | grep -q "^1$" && echo "PASS: Only 1 markdown heading (the title after frontmatter)" || echo "CHECK: Verify no markdown headings inside frontmatter"</automated>
  </verify>
  <done>12-02-SUMMARY.md frontmatter uses proper YAML keys (no `#` headings inside `---` block). Body text correctly references "Phase 12 Plan 01 (health endpoint)" instead of "(Sentry)".</done>
</task>

</tasks>

<verification>
1. `grep "requirements-completed" .planning/phases/09-enhanced-conversions/09-01-SUMMARY.md` returns `requirements-completed: [EC-01, EC-03]`
2. `grep "requirements-completed" .planning/phases/09-enhanced-conversions/09-02-SUMMARY.md` returns `requirements-completed: [EC-04]`
3. `grep "requirements-completed" .planning/phases/10-offline-conversion-pipeline/10-01-SUMMARY.md` returns `requirements-completed: [OFL-01, OFL-02, OFL-03, OFL-04]`
4. `grep "^# " .planning/phases/12-monitoring-observability/12-02-SUMMARY.md` returns only the body heading(s), none inside the YAML frontmatter
5. `grep "Sentry" .planning/phases/12-monitoring-observability/12-02-SUMMARY.md` returns no matches
6. `grep "health endpoint" .planning/phases/12-monitoring-observability/12-02-SUMMARY.md` returns a match
</verification>

<success_criteria>
- 09-01, 09-02, and 10-01 SUMMARY files all have `requirements-completed` in frontmatter with correct requirement IDs
- 12-02-SUMMARY.md has valid YAML frontmatter (all keys are proper YAML, no `#` headings inside `---` block)
- 12-02-SUMMARY.md body references "Phase 12 Plan 01 (health endpoint)" correctly
- No content or meaning is lost in any of the four files — only structural fixes
</success_criteria>

<output>
After completion, create `.planning/phases/11-server-side-event-proxy/11-02-SUMMARY.md`
</output>
